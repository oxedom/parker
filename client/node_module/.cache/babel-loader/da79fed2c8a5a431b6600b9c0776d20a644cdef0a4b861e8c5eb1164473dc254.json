{"ast":null,"code":"import _slicedToArray from\"/home/sam/projects/parker/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import socketio from'socket.io-client';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Webcam=function Webcam(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),stream=_useState2[0],setStream=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),socket=_useState6[0],setSocket=_useState6[1];var handleClick=function handleClick(){navigator.mediaDevices.getUserMedia({video:true,audio:true}).then(function(stream){setStream(stream);}).catch(function(error){setError(error);});};useEffect(function(){if(stream){var _socket=socketio.connect('http://localhost:3000');_socket.on('connect',function(){console.log('Connected to the server');});var sendData=function sendData(){_socket.emit('stream',stream);};var intervalId=setInterval(sendData,1000);// send data every second\nsetSocket(_socket);return function(){clearInterval(intervalId);_socket.disconnect();};}},[stream]);return/*#__PURE__*/_jsxs(\"div\",{children:[error&&/*#__PURE__*/_jsx(\"p\",{children:error.message}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,children:\"Access Webcam\"})]});};export default Webcam;","map":{"version":3,"names":["React","useState","useEffect","socketio","Webcam","stream","setStream","error","setError","socket","setSocket","handleClick","navigator","mediaDevices","getUserMedia","video","audio","then","catch","connect","on","console","log","sendData","emit","intervalId","setInterval","clearInterval","disconnect","message"],"sources":["/home/sam/projects/parker/client/src/comps/Webcam.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport socketio from 'socket.io-client';\n\nconst Webcam = () => {\n  const [stream, setStream] = useState(null);\n  const [error, setError] = useState(null);\n  const [socket, setSocket] = useState(null);\n\n  const handleClick = () => {\n    navigator.mediaDevices.getUserMedia({ video: true, audio: true })\n      .then(stream => {\n        setStream(stream);\n      })\n      .catch(error => {\n        setError(error);\n      });\n  }\n\n  useEffect(() => {\n    if (stream) {\n    \n      const socket = socketio.connect('http://localhost:3000');\n\n      socket.on('connect', () => {\n        console.log('Connected to the server');\n      });\n\n      const sendData = () => {\n        socket.emit('stream', stream);\n      };\n\n      const intervalId = setInterval(sendData, 1000); // send data every second\n\n      setSocket(socket);\n\n      return () => {\n        clearInterval(intervalId);\n        socket.disconnect();\n      };\n    }\n  }, [stream]);\n\n  return (\n    <div>\n      {error && <p>{error.message}</p>}\n      <button onClick={handleClick}>Access Webcam</button>\n    </div>\n  );\n};\n\nexport default Webcam;"],"mappings":"sHAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAOC,SAAQ,KAAM,kBAAkB,CAAC,wFAExC,GAAMC,OAAM,CAAG,QAATA,OAAM,EAAS,CACnB,cAA4BH,QAAQ,CAAC,IAAI,CAAC,wCAAnCI,MAAM,eAAEC,SAAS,eACxB,eAA0BL,QAAQ,CAAC,IAAI,CAAC,yCAAjCM,KAAK,eAAEC,QAAQ,eACtB,eAA4BP,QAAQ,CAAC,IAAI,CAAC,yCAAnCQ,MAAM,eAAEC,SAAS,eAExB,GAAMC,YAAW,CAAG,QAAdA,YAAW,EAAS,CACxBC,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC,CAAEC,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,IAAK,CAAC,CAAC,CAC9DC,IAAI,CAAC,SAAAZ,MAAM,CAAI,CACdC,SAAS,CAACD,MAAM,CAAC,CACnB,CAAC,CAAC,CACDa,KAAK,CAAC,SAAAX,KAAK,CAAI,CACdC,QAAQ,CAACD,KAAK,CAAC,CACjB,CAAC,CAAC,CACN,CAAC,CAEDL,SAAS,CAAC,UAAM,CACd,GAAIG,MAAM,CAAE,CAEV,GAAMI,QAAM,CAAGN,QAAQ,CAACgB,OAAO,CAAC,uBAAuB,CAAC,CAExDV,OAAM,CAACW,EAAE,CAAC,SAAS,CAAE,UAAM,CACzBC,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC,CACxC,CAAC,CAAC,CAEF,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,EAAS,CACrBd,OAAM,CAACe,IAAI,CAAC,QAAQ,CAAEnB,MAAM,CAAC,CAC/B,CAAC,CAED,GAAMoB,WAAU,CAAGC,WAAW,CAACH,QAAQ,CAAE,IAAI,CAAC,CAAE;AAEhDb,SAAS,CAACD,OAAM,CAAC,CAEjB,MAAO,WAAM,CACXkB,aAAa,CAACF,UAAU,CAAC,CACzBhB,OAAM,CAACmB,UAAU,EAAE,CACrB,CAAC,CACH,CACF,CAAC,CAAE,CAACvB,MAAM,CAAC,CAAC,CAEZ,mBACE,uBACGE,KAAK,eAAI,mBAAIA,KAAK,CAACsB,OAAO,EAAK,cAChC,eAAQ,OAAO,CAAElB,WAAY,UAAC,eAAa,EAAS,GAChD,CAEV,CAAC,CAED,cAAeP,OAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}